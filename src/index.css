@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Default theme variables - Light theme as fallback */
  :root {
    /* Background tokens */
    --background-app: #fafafa;
    --background-surface: #ffffff;
    --background-surface-subtle: #f5f5f5;
    --background-hover: #f5f5f5;
    --background-selected: #e5e5e5;
    --background-overlay: rgba(0, 0, 0, 0.5);

    /* Text tokens */
    --text-primary: #171717;
    --text-secondary: #525252;
    --text-muted: #a3a3a3;
    --text-inverse: #ffffff;
    --text-link: #2563eb;
    --text-link-hover: #1d4ed8;

    /* Border tokens */
    --border-default: #e5e5e5;
    --border-subtle: #f5f5f5;
    --border-strong: #d4d4d4;
    --border-focus: #2563eb;

    /* Accent tokens */
    --accent-primary: #2563eb;
    --accent-primary-hover: #1d4ed8;
    --accent-primary-active: #1e40af;
    --accent-primary-subtle: #dbeafe;

    --accent-secondary: #64748b;
    --accent-secondary-hover: #475569;
    --accent-secondary-active: #334155;

    --accent-success: #16a34a;
    --accent-success-hover: #15803d;
    --accent-success-subtle: #dcfce7;

    --accent-warning: #ca8a04;
    --accent-warning-hover: #a16207;
    --accent-warning-subtle: #fef9c3;

    --accent-danger: #dc2626;
    --accent-danger-hover: #b91c1c;
    --accent-danger-subtle: #fee2e2;

    /* State tokens */
    --state-disabled: #f5f5f5;
    --state-disabled-text: #a3a3a3;
    --state-focus: #dbeafe;
    --state-selected: #dbeafe;
    --state-selected-text: #1e40af;

    /* Status tokens */
    --status-success-bg: #dcfce7;
    --status-success-text: #166534;
    --status-warning-bg: #fef9c3;
    --status-warning-text: #854d0e;
    --status-danger-bg: #fee2e2;
    --status-danger-text: #991b1b;
    --status-info-bg: #dbeafe;
    --status-info-text: #1e40af;
  }

  html,
  body {
    margin: 0;
    padding: 0;
    height: 100%;
  }

  body {
    @apply antialiased;
  }
}

/* ============================================
   Receipt Print Styles
   ============================================ */

/* Print-specific utilities */
.print-no-break-inside {
  page-break-inside: avoid;
  break-inside: avoid;
}

/* Compact mode (thermal 80mm receipt) */
.receipt-compact {
  width: 80mm;
  max-width: 80mm;
  margin: 0 auto;
}

/* Detailed mode (A4 layout) */
.receipt-detailed {
  width: 100%;
  max-width: 210mm;
  margin: 0 auto;
}

/* Print media styles */
@media print {
  /* Hide non-print elements */
  .no-print,
  nav,
  header:not(.receipt-print *),
  footer:not(.receipt-print *),
  button:not(.receipt-print *),
  .sidebar,
  .modal-backdrop {
    display: none !important;
  }

  /* Reset page for printing */
  body {
    background: white !important;
    color: black !important;
    font-size: 12pt;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Receipt container takes full page */
  .receipt-print {
    position: relative;
    width: 100%;
    padding: 0;
    margin: 0;
    background: white !important;
  }

  /* Compact mode print sizing */
  .receipt-compact {
    width: 80mm;
    font-size: 9pt;
  }

  /* Detailed mode print sizing */
  .receipt-detailed {
    width: 100%;
    max-width: none;
    font-size: 10pt;
  }

  /* Ensure table layout stability */
  .receipt-print table {
    table-layout: fixed;
    width: 100%;
    border-collapse: collapse;
  }

  /* Zebra rows for detailed mode (print-safe gray) */
  .receipt-detailed tbody tr:nth-child(even) {
    background-color: #f3f4f6 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Prevent breaks inside rows */
  .receipt-print tr,
  .receipt-print .transaction-group,
  .print-no-break-inside {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Keep grand total with last content */
  .receipt-print > *:last-child {
    page-break-before: avoid;
    break-before: avoid;
  }

  /* Page settings */
  @page {
    margin: 10mm;
  }

  @page :first {
    margin-top: 15mm;
  }
}
